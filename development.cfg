[buildout]
parts +=
    supervisor

extends =
    buildouts/base.cfg
    versions.cfg

[hosts]
externalIP =  163.1.141.102
internalIP = 10.2.0.102
servername = mlgb3-dev2.bodleian.ox.ac.uk
mysql = localhost
solr = 127.0.1.1
supervisor = 127.0.2.1

[ports]
apache = 80
mysql = 3306
solr = 1234
supervisor = 9001

[users]
buildout-user = ${env:USER}

[env]
recipe = gocept.recipe.env

[supervisor]
recipe = collective.recipe.supervisor
port  = ${hosts:supervisor}:${ports:supervisor}
supervisord-conf = ${buildout:directory}/parts/supervisor/supervisord.conf
childlogdir = ${buildout:directory}/parts/supervisor
logfile = ${buildout:directory}/parts/supervisor/supervisord.log
logfile-maxbytes = 1MB
logfile-backups = 2
loglevel = info
nodaemon = false
programs =
    10 mlgbctl "${buildout:directory}/parts/jobs/mlgbctl start"
